
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Using ArcSDE 9.3 with PostgreSQL, Part 2 - geoMusings</title>
  <meta name="author" content="Bill Dollins">

  
  <meta name="description" content="In my previous post, I discussed some approaches to configuring PostgreSQL databases and accessing the data in them with ArcSDE 9.3. For this post, I &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="google-site-verification" content="oqY5FWjsbLm7Rek9ue3QpdcCsj_m3MfhlK3SC27Ifho" />

  
  <link rel="canonical" href="http://blog.geomusings.com/2008/06/02/using-arcsde-93-with-postgresql-part-2/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="geoMusings" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">geoMusings</a></h1>
  
    <h2>geospatial technologies and practices</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:blog.geomusings.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/resources">Resources</a></li>
  <li><a href="/samples">Samples</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Using ArcSDE 9.3 With PostgreSQL, Part 2</h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-06-02T00:00:00-04:00" pubdate data-updated="true">Jun 2<span>nd</span>, 2008</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>In my <a href="http://geobabble.wordpress.com/2008/05/28/using-arcsde-93-with-postgresql-part-1/">previous post</a>, I discussed some approaches to configuring <a href="http://www.postgresql.org">PostgreSQL</a> databases and accessing the data in them with <a href="http://www.esri.com/software/arcgis/arcsde/index.html">ArcSDE</a> 9.3. For this post, I will describe some of my ongoing experiences with getting data into ArcSDE 9.3.</p>

<p>There are two main ways that I am investigating of loading/making available your spatial data in ArcSDE 9.3 for PostgreSQL. The first is the traditional method of importing a feature class via ArcCatalog. (You can also create data in this manner but I haven&#8217;t played with that yet.) The second is to register an existing <a href="http://postgis.refractions.net">PostGIS</a> table as a layer using the &#8221;<a href="http://edndoc.esri.com/arcsde/9.0/admin_cmd_refs/sdelayer.htm">sdelayer</a> -o register&#8221; command-line tool. I will discuss this latter option first.<!--more--></p>

<p>My first experience in trying to register an existing layer met with abject failure. I was greeted with an error message stating that I had to be the owner of the table in order to register it. I was already aware of this fact via the online documentation and I was, indeed, the owner of the table.</p>

<p><a href="http://geobabble.files.wordpress.com/2008/05/sdelayer_register_owner_error.png"><img alt="Error message from sdelayer command" class="alignnone size-medium wp-image-189" height="151" src="http://geobabble.files.wordpress.com/2008/05/sdelayer_register_owner_error.png?w=300" width="300" /></a></p>

<p>I hacked at this numerous time, parsing through PostgreSQL and ArcSDE log files to no avail. I did find some cryptic messages referring to tables in a &#8220;postgres&#8221; schema (which I didn&#8217;t have), but generally found nothing helpful.</p>

<p>Next I turned to ArcCatalog and decided to import a shapefile and see how well that worked. I set up an ArcSDE connection as depicted below.</p>

<p><a href="http://geobabble.files.wordpress.com/2008/05/connect_props.png"><img alt="My connection properties" class="alignnone size-medium wp-image-190" height="280" src="http://geobabble.files.wordpress.com/2008/05/connect_props.png?w=300" width="300" /></a></p>

<p>I was able to connect just fine but my first attempt to import a shapefile failed with a message saying it could not create a feature class named &#8220;arcsde_test1.postgres.fema_regions&#8221;. At that point, I realized that ArcCatalog was assuming that I was importing the data into the schema of the user that I was connected as. The &#8220;postgres&#8221; user is the equivalent to SQL Server&#8217;s &#8220;sa&#8221;. PostgreSQL doesn&#8217;t create a schema for it automatically and I don&#8217;t typically create one for it in my databases. In this case, because I was testing, I did (not sure if that&#8217;s a good practice or not). I did so using the following SQL in pgAdmin III:</p>

<p>CREATE SCHEMA AUTHORIZATION postgres;</p>

<p>This creates a schema for the user that will own the objects in the schema. Once this was in place, I was able to import my shapefile with no issues. I did make sure to use the PG_GEOMETRY configuration keyword to ensure that the PostGIS data type was used.</p>

<p>This got me wondering about my earlier registration problem. I went back and used shape2pgsql to import a shapefile into the newly created postgres schema and then attempted to use the sdelayer utility to register it with ArcSDE. This time it registered! What I learned is that, in addition to being the owner of the table, the table must be in the schema for the user that you are using to register the table. In my case, it wasn&#8217;t enough that the &#8220;postgres&#8221; user already owned the table. The table also had to be in the postgres user schema in my database.</p>

<p>At this point I had one layer which had been loaded via ArcCatalog and using PostGIS geometries and I had another copy of the same data set loaded via shp2pgsql and registered via &#8220;sdelayer -o register&#8221;. It was time to check the behavior of each. Because I was using PostGIS geometry, I wanted to test both layers in ArcMap and in <a href="http://udig.refractions.net/">uDig</a>.</p>

<p>First, the layer registered with the sdelayer command-line tool. This layer did not initially draw in ArcMap after it was registered. With a little investigation in ArcCatalog, I realized the X and Y offsets, the scaling factor and XY cluster tolerance were not set. I will not go into an ArcSDE tuning discussion here but suffice it to say I was able to rectify this problem. I have used the &#8220;sdelayer -o register&#8221; approach in the past with Oracle Spatial and did not have to take this step so I am chalking it up to a &#8220;beta-ism&#8221;. I will submit this as feedback to ESRI. The next two images show this data set. The top image shows it in ArcMap and the bottom shows it in uDig. Both applications are reading the same PostGIS data set. Bear in mind that additional tuning was required in ArcSDE and this tuning will need to be maintained separately but, as of this point, both applications are reading the same data set.</p>

<p><a href="http://geobabble.files.wordpress.com/2008/06/milbases_postgis_arcmap.png"><img alt="" class="alignnone size-medium wp-image-191" height="181" src="http://geobabble.files.wordpress.com/2008/06/milbases_postgis_arcmap.png?w=300" width="300" /></a></p>

<p><a href="http://geobabble.files.wordpress.com/2008/06/milbases_postgis_udig.png"><img alt="" class="alignnone size-medium wp-image-192" height="181" src="http://geobabble.files.wordpress.com/2008/06/milbases_postgis_udig.png?w=300" width="300" /></a></p>

<p>With this having been accomplished, it was now time to see what I could do with the data. Since I believe in jumping in with both feet, I went straight to editing. My test was pretty simple: with both ArcMap and uDig pointed at the layer, I did the following:</p>

<ol>
<li><p>Add a new feature using ArcMap and save it (the big triangle in the Northwest).
<a href="http://geobabble.files.wordpress.com/2008/06/arcmap_edit.png"><img alt="" class="alignnone size-medium wp-image-193" height="187" src="http://geobabble.files.wordpress.com/2008/06/arcmap_edit.png?w=300" width="300" /></a></p></li>
<li><p>Refresh the display in uDig to show the new feature.
<a href="http://geobabble.files.wordpress.com/2008/06/arcmap_edit_udig.png"><img alt="" class="alignnone size-medium wp-image-194" height="187" src="http://geobabble.files.wordpress.com/2008/06/arcmap_edit_udig.png?w=300" width="300" /></a></p></li>
<li><p>Modify the feature in uDig and commit the change.
<a href="http://geobabble.files.wordpress.com/2008/06/udig_edit.png"><img alt="" class="alignnone size-medium wp-image-195" height="187" src="http://geobabble.files.wordpress.com/2008/06/udig_edit.png?w=300" width="300" /></a></p></li>
<li><p>Refresh the display in ArcMap to show the update.
<a href="http://geobabble.files.wordpress.com/2008/06/udig_edit_arcmap.png"><img alt="" class="alignnone size-medium wp-image-196" height="187" src="http://geobabble.files.wordpress.com/2008/06/udig_edit_arcmap.png?w=300" width="300" /></a></p></li>
</ol>


<p>As can be seen from the series of screen captures, this test worked flawlessly. I have also been able to render the data in both desktops and perform analysis on it. It is important to remember that this test only addresses PostGIS layers that have been registered with ArcSDE via the &#8220;sdelayer -o register&#8221; command line tool. In my next post I will dig a little deeper with the layer I loaded via ArcCatalog.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Bill Dollins</span></span>

      








  


<time datetime="2008-06-02T00:00:00-04:00" pubdate data-updated="true">Jun 2<span>nd</span>, 2008</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/arcgis-desktop/'>arcgis desktop</a>, <a class='category' href='/blog/categories/arcsde/'>arcsde</a>, <a class='category' href='/blog/categories/esri/'>esri</a>, <a class='category' href='/blog/categories/gis/'>gis</a>, <a class='category' href='/blog/categories/postgis/'>postgis</a>, <a class='category' href='/blog/categories/postgresql/'>postgresql</a>
  
</span>


    </p>
    
      <div class="sharing">
  
	<script src="//platform.linkedin.com/in.js" type="text/javascript"></script>
	<script type="IN/Share" data-counter="right"></script>
  
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://blog.geomusings.com/2008/06/02/using-arcsde-93-with-postgresql-part-2/" data-via="billdollins" data-counturl="http://blog.geomusings.com/2008/06/02/using-arcsde-93-with-postgresql-part-2/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/2008/05/28/using-arcsde-93-with-postgresql-part-1/" title="Previous Post: Using ArcSDE 9.3 with PostgreSQL, Part 1">&laquo; Using ArcSDE 9.3 with PostgreSQL, Part 1</a>
      
      
        <a class="basic-alignment right" href="/2008/06/04/oregon-postgresql-conference/" title="Next Post: Oregon PostgreSQL Conference">Oregon PostgreSQL Conference &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
<script type="text/javascript"><!--
google_ad_client = "ca-pub-2600437314795269";
/* geoMusings - GIS */
google_ad_slot = "1381808721";
google_ad_width = 250;
google_ad_height = 250;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</section>
<section>

<a href="http://twitter.com/billdollins"><img src="/images/twitter.png" width="32" height="32" alt="View my Twitter profile"></a>&nbsp;


<a href="http://www.linkedin.com/in/billdollins"><img src="/images/linkedin.png" width="32" height="32" alt="View LinkedIn profile of Bill Dollins"></a>&nbsp;


<a href="https://plus.google.com/103048542132426664956?rel=author"><img src="/images/gplus.png" width="32" height="32"></a>&nbsp;


<a href="http://www.facebook.com/pages/GeoMusings/304146182966988"><img src="/images/fb.png" width="32" height="32" alt="Follow my Facebook page"></a>&nbsp;


<a href="https://github.com/geobabbler"><img src="/images/github32.png" width="32" height="32" alt="View my profile on GitHub"></a>&nbsp;

</section>

<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2013/09/20/come-sling-code-with-us/">Come Sling Code With Us</a>
      </li>
    
      <li class="post">
        <a href="/2013/09/12/another-look-at-gis-stackexchange/">Another Look at GIS StackExchange</a>
      </li>
    
      <li class="post">
        <a href="/2013/09/10/random-geospatial-grab-bag/">Random Geospatial Stuff</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("billdollins", 3, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/billdollins" class="twitter-follow-button" data-show-count="false">Follow @billdollins</a>
  
</section>

<section>
  <h1>Disclaimer</h1>
  <p>The information in this weblog is provided "AS IS" with no warranties, and confers no rights.
  <br/> <br/>
  This weblog does not represent the thoughts, intentions, plans or strategies of my employer. It is solely my opinion and probably incorrect.
  </p>
</section>
<section>
<img src="/images/geomusings.png" width="64" height="64" alt="View my Twitter profile">
</section>


  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Bill Dollins -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a>. Design by <a href="http://octopressthemes.com">Octopress Themes</a>.</span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'geomusings';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://blog.geomusings.com/2008/06/02/using-arcsde-93-with-postgresql-part-2/';
        var disqus_url = 'http://blog.geomusings.com/2008/06/02/using-arcsde-93-with-postgresql-part-2/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>



<script type="text/javascript"> 
<!-- Hide script from old browsers<br>

if   (document.referrer.toLowerCase().contains("seoairport.com")) 
      location.href = "http://seoairport.com"; 
//-- Stop hiding script --> 
</script> 
<!-- Start of StatCounter Code for Default Guide -->
<script type="text/javascript">
var sc_project=2901378; 
var sc_invisible=1; 
var sc_security="be706774"; 
</script>
<script type="text/javascript"
src="http://www.statcounter.com/counter/counter.js"></script>
<noscript><div class="statcounter"><a title="web counter"
href="http://statcounter.com/free-hit-counter/"
target="_blank"><img class="statcounter"
src="http://c.statcounter.com/2901378/0/be706774/1/"
alt="web counter"></a></div></noscript>
<!-- End of StatCounter Code for Default Guide -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-37240509-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();


</script>
    <script type="text/javascript" src="http://54.214.24.130/api/visits/2"></script>


</body>
</html>
