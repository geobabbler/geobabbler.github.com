---
branches:
  only:
  - source
language: ruby
rvm:
- 1.9.3
before_install:
- git config --global user.name "Travis CI"
- git config --global user.email "travis@travis-ci.org"
before_script:
- export REPO_URL="https://$GH_TOKEN@github.com/$GH_REPO.git"
script:
- bundle exec rake generate
after_script:
after_script:
  - git config credential.helper "store --file=.git/credentials"
  - echo "https://${GH_TOKEN}:@github.com" > .git/credentials
  - bundle exec rake deploy
env:
  global:
  - GH_REPO="geobabbler/geobabbler.github.com"
  - secure: "g+NB5TQwx3xZmHv3bbHDUNMHr0vZEYMRCAqwDjJJaA3GViLi8dk+IK3U2bL2hMWh4OdrZAXhdSWT7tuLCIhRyDTM513dbFlL87jwL5W7PydT2kcbaV9hAkR+Sr1fbuF61GhrBTdFgsX6WYrqNFmrMnxF4zt2dZuG03Mt3lj9R9w="